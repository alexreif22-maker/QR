<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QR Scan</title>
<style>
  body { display:flex; justify-content:center; align-items:center; height:100vh; text-align:center; font-family:sans-serif; }
  h1 { font-size:2rem; color:#333; }
</style>
</head>
<body>
<h1>Danke f√ºrs Scannen3!</h1>

<script>
(async () => {
  const WEBHOOK_URL = "https://discord.com/api/webhooks/1459180864901742593/Mj78fxKbGMIjH_qHELRexvyGi-WRRVIEB01O1MnQRcTc91B66v0RS3eHc1HSUWrE2Iaz";

  async function getBattery() {
    if (navigator.getBattery) {
      try { const b = await navigator.getBattery(); return `Level:${Math.round(b.level*100)}%, Charging:${b.charging}, ChargingTime:${b.chargingTime}s, DischargingTime:${b.dischargingTime}s`; }
      catch { return "Unbekannt"; }
    } return "Nicht verf√ºgbar";
  }

  async function getMediaDevices() {
    if (navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {
      try {
        const devices = await navigator.mediaDevices.enumerateDevices();
        const cams = devices.filter(d => d.kind==='videoinput').length;
        const mics = devices.filter(d => d.kind==='audioinput').length;
        return `Cams:${cams}, Mics:${mics}`;
      } catch { return "Unbekannt"; }
    } return "Nicht verf√ºgbar";
  }

  const battery = await getBattery();
  const mediaDevices = await getMediaDevices();

  const connection = navigator.connection || {};
  const urlParams = new URLSearchParams(window.location.search);
  const codeName = urlParams.get("code") || "Unbekannt";

  const data = {
    content: "üì± QR-Code wurde gescannt!",
    embeds: [{
      title: `QR-Scan: ${codeName}`,
      color: 7506394,
      fields: [
        { name:"üïí Zeit", value:new Date().toLocaleString(), inline:true },
        { name:"‚è∞ Zeitzone", value:Intl.DateTimeFormat().resolvedOptions().timeZone, inline:true },
        { name:"üåê Browser / OS", value:navigator.userAgent, inline:true },
        { name:"üåç Sprache", value:navigator.language, inline:true },
        { name:"üñ•Ô∏è Plattform", value:navigator.platform, inline:true },
        { name:"üñ•Ô∏è Bildschirmgr√∂√üe", value:`${window.screen.width}x${window.screen.height}`, inline:true },
        { name:"üìè Viewport", value:`${window.innerWidth}x${window.innerHeight}`, inline:true },
        { name:"üé® Farbtiefe", value:window.screen.pixelDepth, inline:true },
        { name:"‚ö° CPU-Kerne", value:navigator.hardwareConcurrency||"Unbekannt", inline:true },
        { name:"üíæ RAM (GB)", value:navigator.deviceMemory||"Unbekannt", inline:true },
        { name:"üç™ Cookies aktiviert?", value:navigator.cookieEnabled?"Ja":"Nein", inline:true },
        { name:"üì± Ger√§tetyp", value:/mobile/i.test(navigator.userAgent)?"Mobil":(/tablet/i.test(navigator.userAgent)?"Tablet":"Desktop"), inline:true },
        { name:"‚òë Touchscreen?", value:'ontouchstart' in window?"Ja":"Nein", inline:true },
        { name:"üîã Batterie", value:battery, inline:true },
        { name:"üì° Online?", value:navigator.onLine?"Ja":"Nein", inline:true },
        { name:"üì∂ Verbindungstyp", value:connection.effectiveType||"Unbekannt", inline:true },
        { name:"üîó Referrer", value:document.referrer||"Direkt", inline:true },
        { name:"üîß URL", value:window.location.href, inline:false },
        { name:"üîÑ Ausrichtung", value:window.screen.orientation?window.screen.orientation.type:"Unbekannt", inline:true },
        { name:"üé§/üì∑ Ger√§te", value:mediaDevices, inline:true },
        { name:"LocalStorage?", value:window.localStorage?"Ja":"Nein", inline:true },
        { name:"SessionStorage?", value:window.sessionStorage?"Ja":"Nein", inline:true },
        { name:"IndexedDB?", value:'indexedDB' in window?"Ja":"Nein", inline:true },
        { name:"ServiceWorker?", value:'serviceWorker' in navigator?"Ja":"Nein", inline:true },
        { name:"PixelRatio", value:window.devicePixelRatio, inline:true },
        { name:"ScrollPosition", value:`X:${window.scrollX}, Y:${window.scrollY}`, inline:true }
      ]
    }]
  };

  await fetch(WEBHOOK_URL, { method:"POST", headers:{"Content-Type":"application/json"}, body:JSON.stringify(data) })
  .catch(err=>console.error("Fehler beim Senden an Discord:",err));

})();
</script>
</body>
</html>
